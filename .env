# ====== Database Configuration ======
# Railway Database Connection
DATABASE_URL=postgresql://postgres:UfLneHHsgvbltbojcdtlLIccmfRXgcmt@monorail.proxy.rlwy.net:5432/Railway
DATABASE_PUBLIC_URL=postgresql://postgres:UfLneHHsgvbltbojcdtlLIccmfRXgcmt@monorail.proxy.rlwy.net:5432/Railway

# Individual Database Components (Railway)
DB_USER=postgres
DB_PASSWORD=UfLneHHsgvbltbojcdtlLIccmfRXgcmt
DB_HOST=monorail.proxy.rlwy.net
DB_PORT=5432
DB_NAME=Railway  # Changed from money_transfer_app to Railway
DB_POOL_MAX=10
DB_POOL_MIN=2
DB_POOL_IDLE_TIMEOUT=30000       # 30s
DB_POOL_CONN_TIMEOUT=5000        # 5s (more forgiving during peaks)

# ====== SSL Configuration ======
DB_SSL_MODE=require              # Changed from verify-full to require (Railway compatible)
DB_SSL_REJECT_UNAUTHORIZED=false # Railway requires this
#DB_SSL_CA=/etc/ssl/rds-ca-2019-root.pem  # Not needed for Railway
#DB_SSL_CERT=${DB_CLIENT_CERT}    # Not needed for Railway
#DB_SSL_KEY=${DB_CLIENT_KEY}      # Not needed for Railway

# ====== Application Security ======
JWT_SECRET=acbae68572821fff1a0adeac44c686cc  # Using Railway's JWT secret
JWT_EXPIRES_IN=1h                # Changed from 15m to 1h (Railway setting)
REFRESH_TOKEN_EXPIRES_IN=7d      # With refresh rotation
SESSION_SECRET=different_session_secret_from_jwt  # Different from JWT secret
CRYPTO_SECRET=32byte_encryption_key_here         # 32-byte AES key
CIPHER_IV_LENGTH=16              # For encryption

# ====== Rate Limiting ======
AUTH_RATE_LIMIT_WINDOW=15m
AUTH_RATE_LIMIT_MAX=5            # Stricter for auth endpoints
API_RATE_LIMIT_MAX=100           # General API limit
IP_BAN_ATTEMPTS=10               # Auto-ban suspicious IPs

# ====== Security Policies ======
MIN_PASSWORD_LENGTH=12           # NIST recommendation
MIN_PASSWORD_CHANGE_INTERVAL=86400000  # 24h
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_TIME=30          # Minutes
PASSWORD_HISTORY_LIMIT=5
PASSWORD_COMPLEXITY=4            # Require 4/4: upper, lower, num, special

# ====== Email Service ======
#SMTP_HOST=email-smtp.us-east-1.amazonaws.com  # AWS SES recommended
#SMTP_PORT=587
#SMTP_USER=${SMTP_IAM_USER}       # IAM credentials for SES
#SMTP_PASSWORD=${SMTP_IAM_SECRET}
#EMAIL_FROM=no-reply@yourdomain.com  # Verified domain
#EMAIL_ADMIN=security@yourdomain.com

# ====== 2FA Authentication ======
TOTP_ISSUER=MoneyTransfer (Prod) # Distinguish environments
TOTP_WINDOW=1                    # Â±30s tolerance
TOTP_ALGORITHM=SHA1              # Standard for compatibility
BACKUP_CODE_COUNT=10             # Emergency codes

# ====== Monitoring & Logging ======
LOG_LEVEL=info                   # error > warn > info > debug
LOG_FORMAT=json                  # For SIEM integration
LOG_RETENTION_DAYS=90            # Compliance requirement
AUDIT_LOG_ENABLED=true           # For financial transactions
#SENTRY_DSN=${SENTRY_DSN}         # Error tracking

# ====== Application Settings ======
NODE_ENV=production
PORT=1000
TRUST_PROXY=1                    # For reverse proxy setups
# For local + production frontend URLs
FRONTEND_URLS=https://hawalasend.vercel.app,http://localhost:3000
SUPPORT_PHONE=+12345556789       # Required for financial apps
MAX_TRANSACTION_AMOUNT=5000      # USD (adjust per risk assessment)

# ====== External APIs ======
EXCHANGE_RATE_API_KEY=your_exchange_api_key_here  # Set actual key
EXCHANGE_RATE_API_URL=https://api.forex.com  # Commercial provider
FRAUD_DETECTION_API_ENABLED=true
#PLAID_CLIENT_ID=${PLAID_ID}      # For bank integrations
#PLAID_SECRET=${PLAID_SECRET}

# ====== Feature Flags ======
FEATURE_2FA_ENABLED=true         # Mandatory for financial apps
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TRANSACTION_APPROVAL=true # For large amounts
MAINTENANCE_MODE=false           # For emergency control

# ====== Railway Specific Variables ======
PGDATA=/var/lib/postgresql/data/pgdata
PGDATABASE=Railway
PGHOST=monorail.proxy.rlwy.net
PGPASSWORD=UfLneHHsgvbltbojcdtlLIccmfRXgcmt
PGPORT=5432
PGUSER=postgres
POSTGRES_DB=railway
POSTGRES_PASSWORD=UfLneHHsgvbltbojcdtlLIccmfRXgcmt
POSTGRES_USER=postgres
RAILWAY_DEPLOYMENT_DRAINING_SECONDS=60
SSL_CERT_DAYS=820
